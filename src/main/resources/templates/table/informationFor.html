<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>代取服务页面</title>
        <link rel="stylesheet" href="/bootstrap-3.4.1-dist/css/bootstrap.css">
        <link rel="stylesheet" type="text/css" href="/fex-team-webuploader-ac93940/dist/webuploader.css" />
        <link rel="stylesheet" type="text/css" href="/fex-team-webuploader-ac93940/examples/image-upload/style.css" />
</head>
<style>
        body {
                background-color: #F5F6FF;
        }
        label{
                padding: 5px 0;
        }

        .row{
                padding: 5px 0;
        }
        .infomaition {
                padding: 0 15px;
        }


        ul li {

                list-style: none;
        }

        h3 {

                margin-left: 40px;
                font-size: 25px;
                border-bottom: 3px solid #00b7ee;

        }

        .img1 {
                position: relative;
                width: 36px;
                height: 36px;
                top: 41px;
        }

        .img2 {
                position: relative;
                width: 36px;
                height: 36px;
                top: 41px;
        }

        #btn {
                float: left;
                width: 100px;
                background-color: #00b7ee;
                margin-top: 10px;
        }

        #namemsg {
                display: none;
        }
    
</style>

<body>
        <div class="infomaition">
                <ul class="module-tab-box-ma">
                        <li>    
                                <div class="row">
                                        <div class="col-md-12" style="margin-bottom: 40px;">
                                                <img class="img1" src="/images/btnLogo/express-package-full.png">
                                                <h3>代取服务</h3>
                                        </div>
                                </div>
                                <form id="formFor">
                                        <div class="row" >
                                                <div class="col-md-1"></div>
                                                <div class="col-md-6">
                                                        <div class="row">
                                                                <div class="col-md-10">
                                                                        <label >物品名称 <span id="namemsg">【物品名称不能为空】</span></label>
                                                                        <input type="text" name="name" id="name" class="form-control">
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="col-md-10" >
                                                                        <label>送达地点 </label>
                                                                </div>
                                                                <div class="col-md-10" >
                                                                        <select  class="form-control " id="typeAddress" onchange="func()">

                                                                        </select>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="col-md-10">
                                                                        <label >详细地址 </label>
                                                                        <input id="address" name="address" type="text" class="form-control" placeholder="如:宿舍8栋515">

                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="col-md-10" >
                                                                        <label>代取地点: </label>
                                                                </div>
                                                                <div class="col-md-10" >
                                                                        <select  class="form-control" id="typeDAddress" onchange="funs()">
                                                                                <option>请选择取件地址</option>
                                                                                <option>妈妈驿站</option>
                                                                                <option>8栋长廊</option>
                                                                                <option>菜鸟裹裹</option>
                                                                                <option>369开头东二门</option>
                                                                        </select>
                                                                </div>
                                                                <div class="row">
                                                                        <div class="col-md-10">
                                                                                <!--<label >代取地址 </label>-->
                                                                                <input id="Daddress" name="Daddress" type="text" class="form-control" style="display: none">

                                                                        </div>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="col-md-10">
                                                                        <label >期望送达时间 </label>
                                                                        <input type="datetime-local" name="time" class="form-control">
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="col-md-10">
                                                                        <label >取件码<span id="codes"></span></label>
                                                                        <input id="code" name="code" type="text" class="form-control"  placeholder="请准确填写取件码">

                                                                </div>
                                                        </div>

                                                </div>


                                                <div class="col-md-4">
                                                        <div class=" row">

                                                                <div class="col-md-10">
                                                                        <label>姓名 </label>
                                                                        <input type="text" name="idname" class="form-control" placeholder="请输入姓名">
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="col-md-10">
                                                                        <label>备注信息 </label>
                                                                        <input type="text" name="about" class="form-control">
                                                                </div>
                                                        </div>

                                                        <div class="row">
                                                                <div class="col-md-10">
                                                                        <label>悬赏金额 </label>
                                                                        <input type="text" name="money" class="form-control" onkeyup="clearNoNum(this)">
                                                                </div>

                                                        </div>
                                                        <div class=" row">

                                                                <div class="col-md-10">
                                                                        <label>微信 </label>
                                                                        <input type="text" name="wx" class="form-control" placeholder="">
                                                                </div>
                                                        </div>
                                                        <div class=" row">

                                                                <div class="col-md-10">
                                                                        <label>手机号码 </label>
                                                                        <input type="text" name="phone" class="form-control" placeholder="">
                                                                </div>
                                                        </div>
                                                        <div class=" row">

                                                                <div class="col-md-10">
                                                                        <label>QQ号</label>
                                                                        <input type="text" name="QQ" class="form-control" placeholder="填写您常用的联系方式即可">
                                                                </div>
                                                        </div>

                                                        <div class="row">
                                                                <div class="col-md-12"></div>
                                                                <div class="col-md-12">
                                                                        <button type="button" class="btn btn-success" onclick="updateSubmit()" id="btn">提交</button>
                                                                </div>
                                                        </div>
                                                </div>


                                        </div>

                                </form>
                        </li>
                </ul>
        </div>
        <div class="modal" id="mymodal">
                <div class="modal-dialog">
                        <div class="modal-content">
                                <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="model">
                                                <span aria-hidden="true">x</span>
                                                <span class="sr-only">Close</span>
                                        </button>
                                        <h4 class="modal-title">提示</h4>
                                </div>
                                <div class="modal-body">
                                        <p >发布需求成功</p>
                                </div>
                                <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">继续发布</button>
                                        <button type="button" class="btn btn-primary" onclick="toView()">查看发布</button>
                                </div>
                        </div>
                </div>
        </div>
        <div class="modal" id="erromodal">
                <div class="modal-dialog">
                        <div class="modal-content">
                                <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="model">
                                                <span aria-hidden="true">x</span>
                                                <span class="sr-only">Close</span>
                                        </button>
                                        <h4 class="modal-title">错误</h4>
                                </div>
                                <div class="modal-body">
                                        <p >添加失败！环境异常</p>
                                </div>
                                <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">继续发布</button>
                                        <button type="button" class="btn btn-primary">查看发布</button>
                                </div>
                        </div>
                </div>
        </div>
</body>
<script src="/js/jquery-3.6.0.js"></script>
<script src="/bootstrap-3.4.1-dist/js/bootstrap.min.js"></script>
<script>
       $(document).ready(function () {
               $.ajax({
                       url: "/utils/dropList",
                       method: 'get',
                       success: function (data) {
                               $.each(data.result, function (index, value) {
                                       addOption(index, value)
                               })
                       }
               })

               function addOption(key, val) {
                       var pro = $("#typeAddress");
                       var options
                       for (var i = 0; i < key; i++) {
                               options = `<option value="key" >${val.address}</option>`
                       }
                       pro.append(options);
               }
       })
       function func(){
               var vs = $('#typeAddress option:selected').text();
               $('#address').val(vs)
       }
       function funs(){
               var vc = $('#typeDAddress option:selected').text();
               $('#Daddress').val(vc)
       }
       function clearNoNum(obj) {
                obj.value = obj.value.replace(/[^\d.]/g, ""); //清除"数字"和"."以外的字符
                obj.value = obj.value.replace(/^\./g, ""); //验证第一个字符是数字而不是字符          
                obj.value = obj.value.replace(/\.{2,}/g, "."); //只保留第一个.清除多余的       
                obj.value = obj.value.replace(".", "$#$").replace(/\./g, "").replace("$#$", ".");
                obj.value = obj.value.replace(/^(\-)*(\d+)\.(\d\d).*$/, '$1$2.$3'); //只能输入两个小数
        }

        var names = $('#name').val();
        $('#name').focus(function () {
                $("#namemsg").css('color', 'red').show();
        })
        $('#name').blur(function () {
                if ($('#name').val() == '') {

                } else {
                        $('#namemsg').hide()
                }
        })
        $("#phone").onblur = function () {
                //1.获取密码值
                var phone = $("#phone").val();
                //2.定义正则
                var reg_phone = /^1(3|4|5|6|7|8|9)\d{9}$/;
                //3.判断，给出提示信息
                var flag = reg_phone.test(phone);
                if (flag) {
                        //密码合法
                        $("#ph").html('')
                } else {
                        //密码非法,加一个红色边框
                        $("#ph").html('您输入的用户名有误').css('color', 'red');
                }
        }
       function updateSubmit(){

                $.ajax({
                        url: "/submit/saveMationFor",
                        method: 'post',
                        async: false,
                        data: $('#formFor').serialize(),
                        success: function (data) {
                                $("#mymodal").modal("toggle");
                        },
                        error: function (data) {
                                $("#erromodal").modal("toggle");
                        }
                })
        }

       function toView(){
                $.ajax({
                        url: '/toview'
                })
       }
</script>


</html>